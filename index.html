<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Onbora - Help New Hires Belong from Day One</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; }
        .animate-fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .hidden { display: none; }
        .chat-message { animation: slideIn 0.3s ease-out; }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
    </style>
</head>
<body>
    <div id="app">
        <!-- Landing Page -->
        <div id="landing" class="min-h-screen bg-white">
            <nav class="flex justify-between items-center px-8 py-6 border-b border-gray-100">
                <div class="flex items-center space-x-2">
                    <div class="w-8 h-8 bg-black rounded-lg flex items-center justify-center">
                        <span class="text-white font-bold text-sm">O</span>
                    </div>
                    <span class="text-xl font-bold">Onbora</span>
                </div>
                <div class="flex items-center space-x-8">
                    <button class="text-gray-600 hover:text-black transition">Features</button>
                    <button class="text-gray-600 hover:text-black transition">How it Works</button>
                    <button class="text-gray-600 hover:text-black transition">Pricing</button>
                    <button 
                        onclick="showView('setup')"
                        class="bg-black text-white px-6 py-2.5 rounded-full hover:bg-gray-800 transition"
                    >
                        Get Started
                    </button>
                </div>
            </nav>

            <section class="max-w-6xl mx-auto px-8 py-20 text-center">
                <div class="animate-fade-in">
                    <h1 class="text-7xl font-bold leading-tight mb-6">
                        Help New Hires<br />
                        Belong from Day One
                    </h1>
                    <p class="text-xl text-gray-600 max-w-3xl mx-auto mb-8">
                        Create personalized onboarding experiences that make every new employee 
                        feel welcomed, informed, and ready to contributeâ€”without endless prep work for you.
                    </p>
                    <div class="flex justify-center space-x-4">
                        <button 
                            onclick="showView('setup')"
                            class="bg-black text-white px-8 py-4 rounded-full text-lg hover:bg-gray-800 transition"
                        >
                            Start Free Trial
                        </button>
                        <button 
                            onclick="showView('employee')"
                            class="border-2 border-black text-black px-8 py-4 rounded-full text-lg hover:bg-gray-50 transition"
                        >
                            See Demo
                        </button>
                    </div>
                </div>
            </section>
        </div>

        <!-- Setup Page -->
        <div id="setup" class="hidden min-h-screen bg-gray-50">
            <nav class="bg-white border-b border-gray-200 px-8 py-4">
                <div class="flex justify-between items-center">
                    <div 
                        class="flex items-center space-x-2 cursor-pointer"
                        onclick="showView('landing')"
                    >
                        <div class="w-8 h-8 bg-black rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold text-sm">O</span>
                        </div>
                        <span class="text-xl font-bold">Onbora</span>
                    </div>
                    <button 
                        onclick="showView('landing')"
                        class="text-gray-600 hover:text-black transition text-2xl"
                    >
                        Ã—
                    </button>
                </div>
            </nav>

            <div class="max-w-4xl mx-auto px-8 py-12">
                <div class="text-center mb-12">
                    <h1 class="text-4xl font-bold mb-4">Let's get your company set up</h1>
                    <p class="text-xl text-gray-600">
                        This will take about 5 minutes. We'll capture your company info and culture.
                    </p>
                </div>

                <!-- Step 1: Company Info -->
                <div id="step1" class="bg-white rounded-3xl p-8 shadow-sm mb-6">
                    <h2 class="text-2xl font-bold mb-6">Company Information</h2>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Company Name</label>
                            <input type="text" id="companyName" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-black" placeholder="Your Company">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Company Size</label>
                            <select id="companySize" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-black">
                                <option value="">Select size</option>
                                <option value="1-10">1-10 employees</option>
                                <option value="11-50">11-50 employees</option>
                                <option value="51-200">51-200 employees</option>
                                <option value="201-1000">201-1000 employees</option>
                                <option value="1000+">1000+ employees</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Industry</label>
                            <input type="text" id="companyIndustry" class="w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-black" placeholder="e.g., Technology, Healthcare">
                        </div>
                    </div>
                    <div class="mt-6 text-right">
                        <button 
                            onclick="nextStep(2)"
                            class="bg-black text-white px-6 py-3 rounded-xl hover:bg-gray-800 transition"
                        >
                            Continue
                        </button>
                    </div>
                </div>

                <!-- Step 2: Documents -->
                <div id="step2" class="hidden bg-white rounded-3xl p-8 shadow-sm mb-6">
                    <h2 class="text-2xl font-bold mb-6">Company Documents</h2>
                    <p class="text-gray-600 mb-6">
                        Upload your employee handbook, policies, or any other documents that new hires should know about.
                    </p>
                    <div class="border-2 border-dashed border-gray-300 rounded-xl p-8 text-center">
                        <div class="text-4xl mb-4">ðŸ“„</div>
                        <p class="text-gray-600 mb-4">Drag and drop files here, or click to browse</p>
                        <p class="text-sm text-blue-600 mb-4">Documents will be analyzed by AI agents to provide personalized responses</p>
                        <input type="file" id="fileInput" multiple accept=".pdf,.doc,.docx,.txt" class="hidden" onchange="handleFileUpload(event)">
                        <button onclick="document.getElementById('fileInput').click()" class="bg-black text-white px-6 py-3 rounded-xl hover:bg-gray-800 transition">
                            Choose Files
                        </button>
                    </div>
                    <div id="fileList" class="mt-4 space-y-2"></div>
                    
                    <!-- Document Processing Status -->
                    <div id="docProcessingStatus" class="hidden mt-4 p-3 bg-blue-50 border border-blue-200 rounded-lg">
                        <div class="flex items-center space-x-2">
                            <div class="w-3 h-3 bg-blue-500 rounded-full animate-pulse"></div>
                            <span class="text-sm text-blue-800">Processing documents for AI analysis...</span>
                        </div>
                    </div>
                    <div class="mt-6 flex justify-between">
                        <button 
                            onclick="prevStep(1)"
                            class="px-6 py-3 border border-gray-300 text-gray-700 rounded-xl hover:bg-gray-50 transition"
                        >
                            Back
                        </button>
                        <button 
                            onclick="nextStep(3)"
                            class="bg-black text-white px-6 py-3 rounded-xl hover:bg-gray-800 transition"
                        >
                            Continue
                        </button>
                    </div>
                </div>

                <!-- Step 3: Culture Interview -->
                <div id="step3" class="hidden bg-white rounded-3xl p-8 shadow-sm mb-6">
                    <h2 class="text-2xl font-bold mb-6">Let's capture your culture</h2>
                    <p class="text-gray-600 mb-8">
                        I'll have a quick conversation with you to understand what makes your company special. 
                        This usually takes about 10 minutes.
                    </p>
                    
                    <div id="interview" class="bg-gray-50 rounded-2xl p-6">
                        <div id="interviewMessages" class="mb-4 space-y-4 max-h-96 overflow-y-auto">
                            <div class="flex justify-start">
                                <div class="max-w-lg">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                                            <span>ðŸ¤–</span>
                                        </div>
                                        <span class="text-sm font-medium">AI Interviewer</span>
                                    </div>
                                    <div class="bg-white border border-gray-200 rounded-2xl px-4 py-3 mr-12">
                                        <p class="text-gray-800">
                                            Welcome! I'm your AI interviewer. I'll help capture what makes your company special. 
                                            Let's start with something simple - how would you describe your company culture in a few words?
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="border-t border-gray-200 pt-4">
                            <div class="flex space-x-3">
                                <input
                                    type="text"
                                    id="interviewInput"
                                    class="flex-1 px-4 py-2.5 border border-gray-200 rounded-xl focus:outline-none focus:border-black"
                                    placeholder="Type your answer here..."
                                    onkeypress="if(event.key==='Enter') submitInterview()"
                                >
                                <button 
                                    onclick="submitInterview()"
                                    class="bg-black text-white px-5 py-2.5 rounded-xl hover:bg-gray-800 transition"
                                >
                                    Send
                                </button>
                            </div>
                        </div>
                    </div>

                    <!-- Interview Summary (shown after completion) -->
                    <div id="interviewSummary" class="hidden mt-6 bg-green-50 border border-green-200 rounded-2xl p-6">
                        <div class="text-center mb-6">
                            <div class="text-4xl mb-4">ðŸŽ‰</div>
                            <h3 class="text-2xl font-bold mb-2">Interview Complete!</h3>
                            <p class="text-gray-600">Great! I've captured your company culture. Here's a summary:</p>
                        </div>
                        
                        <div id="summaryContent" class="space-y-4 mb-6">
                            <!-- Summary will be populated here -->
                        </div>
                        
                        <div class="text-center">
                            <button 
                                onclick="showView('employee')"
                                class="bg-black text-white px-6 py-3 rounded-xl hover:bg-gray-800 transition"
                            >
                                Preview Your Agents
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Employee Experience Page (Full UI with all agents) -->
        <div id="employee" class="hidden min-h-screen bg-gray-50">
            <nav class="bg-white border-b border-gray-200 px-8 py-4">
                <div class="flex justify-between items-center">
                    <div 
                        class="flex items-center space-x-2 cursor-pointer"
                        onclick="showView('landing')"
                    >
                        <div class="w-8 h-8 bg-black rounded-lg flex items-center justify-center">
                            <span class="text-white font-bold text-sm">O</span>
                        </div>
                        <span class="text-xl font-bold">Onbora</span>
                    </div>
                    <button 
                        onclick="showView('landing')"
                        class="text-gray-600 hover:text-black transition text-2xl"
                    >
                        Ã—
                    </button>
                </div>
            </nav>

            <div class="flex h-screen pt-16">
                <!-- Left Sidebar - Agent Selection -->
                <div class="w-80 bg-white border-r border-gray-200 p-6 overflow-y-auto">
                    <h2 class="text-xl font-bold mb-6">Your AI Team</h2>
                    
                    <!-- AI Status Indicator -->
                    <div class="mb-6 p-4 bg-green-50 border border-green-200 rounded-xl">
                        <div class="flex items-center space-x-2 mb-2">
                            <div class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></div>
                            <span class="text-sm font-medium text-green-800">AI Service Active</span>
                        </div>
                        <p class="text-xs text-green-700">
                            Powered by Google Gemini â€¢ Company context loaded â€¢ Documents analyzed
                        </p>
                    </div>
                    
                    <div class="space-y-3">
                        <div 
                            onclick="selectAgent('maya')"
                            class="agent-item p-4 rounded-xl cursor-pointer hover:bg-gray-50 transition"
                            data-agent="maya"
                        >
                            <div class="flex items-center space-x-3">
                                <div class="text-2xl">ðŸ‘‹</div>
                                <div class="flex-1">
                                    <h3 class="font-semibold">Maya</h3>
                                    <p class="text-sm text-gray-600">Welcome Guide</p>
                                    <p class="text-xs text-blue-600">AI-powered responses</p>
                                </div>
                            </div>
                        </div>
                        <div 
                            onclick="selectAgent('alex')"
                            class="agent-item p-4 rounded-xl cursor-pointer hover:bg-gray-50 transition"
                            data-agent="alex"
                        >
                            <div class="flex items-center space-x-3">
                                <div class="text-2xl">ðŸ“‹</div>
                                <div class="flex-1">
                                    <h3 class="font-semibold">Alex</h3>
                                    <p class="text-sm text-gray-600">HR Assistant</p>
                                    <p class="text-xs text-blue-600">AI-powered responses</p>
                                </div>
                            </div>
                        </div>
                        <div 
                            onclick="selectAgent('jordan')"
                            class="agent-item p-4 rounded-xl cursor-pointer hover:bg-gray-50 transition"
                            data-agent="jordan"
                        >
                            <div class="flex items-center space-x-3">
                                <div class="text-2xl">ðŸŽ¯</div>
                                <div class="flex-1">
                                    <h3 class="font-semibold">Jordan</h3>
                                    <p class="text-sm text-gray-600">Culture Guide</p>
                                    <p class="text-xs text-blue-600">AI-powered responses</p>
                                </div>
                            </div>
                        </div>
                        <div 
                            onclick="selectAgent('sam')"
                            class="agent-item p-4 rounded-xl cursor-pointer hover:bg-gray-50 transition"
                            data-agent="sam"
                        >
                            <div class="flex items-center space-x-3">
                                <div class="text-2xl">ðŸ’»</div>
                                <div class="flex-1">
                                    <h3 class="font-semibold">Sam</h3>
                                    <p class="text-sm text-gray-600">Tech Setup</p>
                                    <p class="text-xs text-blue-600">AI-powered responses</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Checklist Section -->
                    <div class="mt-8">
                        <h3 class="text-lg font-semibold mb-4">Onboarding Checklist</h3>
                        <div class="space-y-2">
                            <div class="flex items-center space-x-3">
                                <input type="checkbox" id="check1" class="w-4 h-4 rounded border-gray-300 text-black focus:ring-black">
                                <label for="check1" class="text-sm text-gray-700">Complete office tour</label>
                            </div>
                            <div class="flex items-center space-x-3">
                                <input type="checkbox" id="check2" class="w-4 h-4 rounded border-gray-300 text-black focus:ring-black">
                                <label for="check2" class="text-sm text-gray-700">Set up workspace</label>
                            </div>
                            <div class="flex items-center space-x-3">
                                <input type="checkbox" id="check3" class="w-4 h-4 rounded border-gray-300 text-black focus:ring-black">
                                <label for="check3" class="text-sm text-gray-700">Meet team members</label>
                            </div>
                            <div class="flex items-center space-x-3">
                                <input type="checkbox" id="check4" class="w-4 h-4 rounded border-gray-300 text-black focus:ring-black">
                                <label for="check4" class="text-sm text-gray-700">Review handbook</label>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main Chat Area -->
                <div class="flex-1 flex flex-col">
                    <!-- Chat Header -->
                    <div class="bg-white border-b border-gray-200 p-6">
                        <div class="flex items-center space-x-4">
                            <div id="currentAgentAvatar" class="text-3xl">ðŸ‘‹</div>
                            <div>
                                <h2 id="currentAgentName" class="text-2xl font-bold">Maya</h2>
                                <p id="currentAgentRole" class="text-gray-600">Welcome Guide</p>
                            </div>
                        </div>
                    </div>

                    <!-- Chat Messages -->
                    <div class="flex-1 bg-gray-50 p-6 overflow-y-auto">
                        <div id="chatMessages" class="space-y-4">
                            <div class="flex justify-start">
                                <div class="max-w-lg">
                                    <div class="flex items-center space-x-2 mb-2">
                                        <span class="text-sm font-medium">Maya</span>
                                        <span class="text-xs px-2 py-0.5 rounded-full bg-purple-100 text-purple-800">Welcome Guide</span>
                                    </div>
                                    <div class="bg-white border border-gray-200 rounded-2xl px-4 py-3 mr-12">
                                        <p class="text-gray-800">
                                            Hi! I'm Maya, your welcome guide. I'm here to help you get settled in on your first day! 
                                            What would you like to know about getting started?
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chat Input -->
                    <div class="bg-white border-t border-gray-200 p-6">
                        <div class="flex space-x-3">
                            <input
                                type="text"
                                id="chatInput"
                                class="flex-1 px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:border-black"
                                placeholder="Ask anything..."
                                onkeypress="if(event.key==='Enter') sendMessage()"
                            >
                            <button 
                                onclick="sendMessage()"
                                class="bg-black text-white px-6 py-3 rounded-xl hover:bg-gray-800 transition"
                            >
                                Send
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let interviewQuestionIndex = 0;
        let currentAgent = 'maya';
        let uploadedFiles = [];
        
        const interviewQuestions = [
            "That's great! Now, what are the core values that drive your team? What principles guide how you work together?",
            "Perfect! What should new employees know about your work style? Are you more collaborative or independent? Fast-paced or methodical?",
            "Excellent insights! What are the most important things a new hire should accomplish in their first day?",
            "Very helpful! How about the first week - what key milestones should they hit?",
            "Almost done! What unique traditions, perks, or aspects of your company would make new hires excited to join?",
            "Last question - what's the one piece of advice you'd give to someone starting at your company tomorrow?",
            "Thank you so much! I've captured everything I need to create a personalized onboarding experience for your new hires."
        ];

        const agents = {
            maya: { 
                name: 'Maya', 
                role: 'Welcome Guide', 
                avatar: 'ðŸ‘‹',
                greeting: "Hi! I'm Maya, your welcome guide. I'm here to help you get settled in on your first day! What would you like to know about getting started?"
            },
            alex: { 
                name: 'Alex', 
                role: 'HR Assistant', 
                avatar: 'ðŸ“‹',
                greeting: "Hello! I'm Alex from HR. I can help you with benefits, policies, and all the administrative stuff. What do you need help with?"
            },
            jordan: { 
                name: 'Jordan', 
                role: 'Culture Guide', 
                avatar: 'ðŸŽ¯',
                greeting: "Hey there! I'm Jordan, your culture guide. Let me tell you about how we do things here! What would you like to know about our culture?"
            },
            sam: { 
                name: 'Sam', 
                role: 'Tech Setup', 
                avatar: 'ðŸ’»',
                greeting: "Hi! I'm Sam from IT. I'll help you get all your tools and accounts set up. What tech setup do you need help with?"
            }
        };

        function showView(viewName) {
            // Hide all views
            document.querySelectorAll('#landing, #setup, #employee').forEach(el => {
                if (el) el.classList.add('hidden');
            });
            
            // Show the requested view
            const view = document.getElementById(viewName);
            if (view) {
                view.classList.remove('hidden');
            }

            // Reset interview if going back to setup
            if (viewName === 'setup') {
                resetInterview();
            }
        }

        function nextStep(step) {
            if (step === 2) {
                // Validate step 1
                const companyName = document.getElementById('companyName').value;
                if (!companyName.trim()) {
                    alert('Please enter your company name');
                    return;
                }
            }
            
            document.getElementById(`step${currentStep}`).classList.add('hidden');
            document.getElementById(`step${step}`).classList.remove('hidden');
            currentStep = step;
        }

        function prevStep(step) {
            document.getElementById(`step${currentStep}`).classList.add('hidden');
            document.getElementById(`step${step}`).classList.remove('hidden');
            currentStep = step;
        }

        function handleFileUpload(event) {
            const files = event.target.files;
            const fileList = document.getElementById('fileList');
            const docProcessingStatus = document.getElementById('docProcessingStatus');
            
            // Show processing status
            docProcessingStatus.classList.remove('hidden');
            
            for (let file of files) {
                uploadedFiles.push(file);
                const fileItem = document.createElement('div');
                fileItem.className = 'flex items-center justify-between p-3 bg-gray-50 rounded-lg';
                fileItem.innerHTML = `
                    <div class="flex items-center space-x-2">
                        <span class="text-gray-600">ðŸ“„</span>
                        <span class="text-sm text-gray-700">${file.name}</span>
                        <span class="text-xs text-blue-600">Processing...</span>
                    </div>
                    <button onclick="removeFile('${file.name}')" class="text-red-500 hover:text-red-700 text-sm">Ã—</button>
                `;
                fileList.appendChild(fileItem);
            }
            
            // Simulate document processing completion
            setTimeout(() => {
                docProcessingStatus.classList.add('hidden');
                
                // Update file items to show completion
                const fileItems = fileList.querySelectorAll('.flex');
                fileItems.forEach(item => {
                    const statusSpan = item.querySelector('.text-blue-600');
                    if (statusSpan) {
                        statusSpan.textContent = 'âœ“ Ready for AI';
                        statusSpan.className = 'text-xs text-green-600';
                    }
                });
                
                // Show success message
                const successDiv = document.createElement('div');
                successDiv.className = 'mt-2 p-2 bg-green-50 border border-green-200 rounded-lg';
                successDiv.innerHTML = `
                    <div class="flex items-center space-x-2">
                        <span class="text-green-600">âœ“</span>
                        <span class="text-sm text-green-800">${uploadedFiles.length} document(s) processed and ready for AI analysis</span>
                    </div>
                `;
                fileList.appendChild(successDiv);
                
                // Remove success message after 5 seconds
                setTimeout(() => {
                    if (successDiv.parentNode) {
                        successDiv.remove();
                    }
                }, 5000);
                
            }, 2000);
        }

        function removeFile(fileName) {
            uploadedFiles = uploadedFiles.filter(f => f.name !== fileName);
            // Refresh file list display
            const fileList = document.getElementById('fileList');
            fileList.innerHTML = '';
            uploadedFiles.forEach(file => {
                const fileItem = document.createElement('div');
                fileItem.className = 'flex items-center justify-between p-3 bg-gray-50 rounded-lg';
                fileItem.innerHTML = `
                    <div class="flex items-center space-x-2">
                        <span class="text-gray-600">ðŸ“„</span>
                        <span class="text-sm text-gray-700">${file.name}</span>
                    </div>
                    <button onclick="removeFile('${file.name}')" class="text-red-500 hover:text-red-700 text-sm">Ã—</button>
                `;
                fileList.appendChild(fileItem);
            });
        }

        function submitInterview() {
            const input = document.getElementById('interviewInput');
            const message = input.value.trim();
            if (!message) return;

            // Add user message
            addInterviewMessage(message, true);
            input.value = '';

            // Store the answer for the summary
            if (!window.interviewAnswers) window.interviewAnswers = [];
            window.interviewAnswers.push(message);

            // Show typing indicator for AI
            const typingDiv = document.createElement('div');
            typingDiv.className = 'flex justify-start chat-message';
            typingDiv.id = 'interviewTypingIndicator';
            typingDiv.innerHTML = `
                <div class="max-w-lg">
                    <div class="flex items-center space-x-2 mb-2">
                        <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                            <span>ðŸ¤–</span>
                        </div>
                        <span class="text-sm font-medium">AI Interviewer</span>
                    </div>
                    <div class="bg-white border border-gray-200 rounded-2xl px-4 py-3 mr-12">
                        <p class="text-gray-800">Thinking...</p>
                    </div>
                </div>
            `;
            document.getElementById('interviewMessages').appendChild(typingDiv);
            document.getElementById('interviewMessages').scrollTop = document.getElementById('interviewMessages').scrollTop;

            // Call AI for intelligent follow-up questions
            callAIInterviewer(message);
        }

        async function callAIInterviewer(message) {
            try {
                // Remove typing indicator
                const typingIndicator = document.getElementById('interviewTypingIndicator');
                if (typingIndicator) typingIndicator.remove();

                // Prepare context for the AI interviewer
                const interviewContext = {
                    companyName: document.getElementById('companyName').value || 'Your Company',
                    companySize: document.getElementById('companySize').value || 'Not specified',
                    companyIndustry: document.getElementById('companyIndustry').value || 'Not specified',
                    previousAnswers: window.interviewAnswers || [],
                    currentQuestion: interviewQuestionIndex + 1,
                    totalQuestions: 7
                };

                const response = await fetch('/api/gemini', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        prompt: `You are an AI interviewer helping to understand a company's culture for onboarding purposes. 
                        
                        Company: ${interviewContext.companyName}
                        Size: ${interviewContext.companySize}
                        Industry: ${interviewContext.companyIndustry}
                        
                        Previous answers: ${interviewContext.previousAnswers.join(', ')}
                        
                        Current question: ${interviewContext.currentQuestion} of ${interviewContext.totalQuestions}
                        
                        The user just answered: "${message}"
                        
                        Based on their answer, ask the next intelligent follow-up question to understand their company culture. 
                        Make it conversational and build on what they've shared. 
                        If this is the last question, thank them and say the interview is complete.
                        
                        Keep your response under 100 words and make it feel natural and engaging.`,
                        maxTokens: 150
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                // Check if interview is complete
                if (interviewQuestionIndex >= 6) { // 7 questions total (0-6)
                    // Interview complete - show summary immediately
                    showInterviewSummary();
                } else {
                    // Add AI response and continue
                    addInterviewMessage(data.response, false);
                    interviewQuestionIndex++;
                }
                
            } catch (error) {
                console.error('Error calling AI interviewer:', error);
                
                // Remove typing indicator
                const typingIndicator = document.getElementById('interviewTypingIndicator');
                if (typingIndicator) typingIndicator.remove();
                
                // Fallback to static questions
                if (interviewQuestionIndex < interviewQuestions.length) {
                    addInterviewMessage(interviewQuestions[interviewQuestionIndex], false);
                    interviewQuestionIndex++;
                } else {
                    showInterviewSummary();
                }
            }
        }

        function showInterviewSummary() {
            // Hide interview interface
            document.getElementById('interview').classList.add('hidden');
            
            // Show summary
            const summary = document.getElementById('interviewSummary');
            summary.classList.remove('hidden');
            
            // Populate summary content
            const summaryContent = document.getElementById('summaryContent');
            summaryContent.innerHTML = `
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-white p-4 rounded-lg">
                        <h4 class="font-semibold text-gray-800 mb-2">Company Info</h4>
                        <p class="text-sm text-gray-600">Name: ${document.getElementById('companyName').value || 'Not specified'}</p>
                        <p class="text-sm text-gray-600">Size: ${document.getElementById('companySize').value || 'Not specified'}</p>
                        <p class="text-sm text-gray-600">Industry: ${document.getElementById('companyIndustry').value || 'Not specified'}</p>
                    </div>
                    <div class="bg-white p-4 rounded-lg">
                        <h4 class="font-semibold text-gray-800 mb-2">Documents</h4>
                        <p class="text-sm text-gray-600">${uploadedFiles.length} file(s) uploaded</p>
                        ${uploadedFiles.length > 0 ? '<p class="text-xs text-green-600 mt-1">âœ“ Documents will be analyzed by AI agents</p>' : ''}
                    </div>
                </div>
                <div class="bg-white p-4 rounded-lg">
                    <h4 class="font-semibold text-gray-800 mb-2">Culture Insights Captured</h4>
                    <p class="text-sm text-gray-600">âœ“ Company culture description</p>
                    <p class="text-sm text-gray-600">âœ“ Core values and principles</p>
                    <p class="text-sm text-gray-600">âœ“ Work style preferences</p>
                    <p class="text-sm text-gray-600">âœ“ First day priorities</p>
                    <p class="text-sm text-gray-600">âœ“ First week milestones</p>
                    <p class="text-sm text-gray-600">âœ“ Company traditions & perks</p>
                    <p class="text-sm text-gray-600">âœ“ Key advice for new hires</p>
                </div>
            `;
        }

        function addInterviewMessage(text, isUser) {
            const messagesContainer = document.getElementById('interviewMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${isUser ? 'justify-end' : 'justify-start'} chat-message`;
            
            messageDiv.innerHTML = `
                <div class="max-w-lg">
                    ${!isUser ? `
                        <div class="flex items-center space-x-2 mb-2">
                            <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                                <span>ðŸ¤–</span>
                            </div>
                            <span class="text-sm font-medium">AI Interviewer</span>
                        </div>
                    ` : ''}
                    <div class="rounded-2xl px-4 py-3 ${isUser ? 'bg-black text-white ml-12' : 'bg-white border border-gray-200 mr-12'}">
                        <p class="${isUser ? 'text-white' : 'text-gray-800'}">${text}</p>
                    </div>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function selectAgent(agentId) {
            currentAgent = agentId;
            const agent = agents[agentId];
            
            // Update UI
            document.getElementById('currentAgentAvatar').textContent = agent.avatar;
            document.getElementById('currentAgentName').textContent = agent.name;
            document.getElementById('currentAgentRole').textContent = agent.role;
            
            // Update active agent styling
            document.querySelectorAll('.agent-item').forEach(item => {
                item.classList.remove('bg-blue-50', 'border-blue-200');
            });
            document.querySelector(`[data-agent="${agentId}"]`).classList.add('bg-blue-50', 'border-blue-200');
            
            // Add agent greeting message
            addChatMessage(agent.greeting, false);
        }

        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            if (!message) return;

            // Add user message
            addChatMessage(message, true);
            input.value = '';

            // Show typing indicator
            const typingDiv = document.createElement('div');
            typingDiv.className = 'flex justify-start chat-message';
            typingDiv.id = 'typingIndicator';
            typingDiv.innerHTML = `
                <div class="max-w-lg">
                    <div class="flex items-center space-x-2 mb-2">
                        <span class="text-sm font-medium">${agents[currentAgent].name}</span>
                        <span class="text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-800">${agents[currentAgent].role}</span>
                    </div>
                    <div class="bg-white border border-gray-200 rounded-2xl px-4 py-3 mr-12">
                        <p class="text-gray-800">Typing...</p>
                    </div>
                </div>
            `;
            document.getElementById('chatMessages').appendChild(typingDiv);
            document.getElementById('chatMessages').scrollTop = document.getElementById('chatMessages').scrollTop;

            // Call the real AI API
            callAIAgent(message, currentAgent);
        }

        async function callAIAgent(message, agentId) {
            try {
                // Remove typing indicator
                const typingIndicator = document.getElementById('typingIndicator');
                if (typingIndicator) typingIndicator.remove();

                // Prepare context for the AI
                const companyContext = {
                    name: document.getElementById('companyName').value || 'Your Company',
                    size: document.getElementById('companySize').value || 'Not specified',
                    industry: document.getElementById('companyIndustry').value || 'Not specified',
                    culture: window.interviewAnswers || [],
                    documents: uploadedFiles.map(f => f.name)
                };

                const response = await fetch('/api/ai-chat', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        message: message,
                        agent: agentId,
                        context: companyContext
                    })
                });

                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }

                const data = await response.json();
                
                // Add AI response
                addChatMessage(data.response, false);
                
            } catch (error) {
                console.error('Error calling AI agent:', error);
                
                // Remove typing indicator
                const typingIndicator = document.getElementById('typingIndicator');
                if (typingIndicator) typingIndicator.remove();
                
                // Show fallback response
                const fallbackResponses = {
                    maya: "I'm having trouble connecting to my AI brain right now, but I'd be happy to help you with general onboarding questions! What would you like to know about getting started?",
                    alex: "I'm experiencing a technical issue, but I can still help with basic HR questions. What do you need assistance with?",
                    jordan: "I'm having a moment, but I'd love to tell you about company culture! What would you like to know?",
                    sam: "I'm having some tech difficulties, but I can still help with basic setup questions. What do you need help with?"
                };
                addChatMessage(fallbackResponses[agentId], false);
            }
        }

        function addChatMessage(text, isUser) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `flex ${isUser ? 'justify-end' : 'justify-start'} chat-message`;
            
            messageDiv.innerHTML = `
                <div class="max-w-lg">
                    ${!isUser ? `
                        <div class="flex items-center space-x-2 mb-2">
                            <span class="text-sm font-medium">${agents[currentAgent].name}</span>
                            <span class="text-xs px-2 py-0.5 rounded-full bg-blue-100 text-blue-800">${agents[currentAgent].role}</span>
                        </div>
                    ` : ''}
                    <div class="rounded-2xl px-4 py-3 ${isUser ? 'bg-black text-white ml-12' : 'bg-white border border-gray-200 mr-12'}">
                        <p class="${isUser ? 'text-white' : 'text-gray-800'}">${text}</p>
                    </div>
                </div>
            `;
            
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function resetInterview() {
            interviewQuestionIndex = 0;
            document.getElementById('interview').classList.remove('hidden');
            document.getElementById('interviewSummary').classList.add('hidden');
            document.getElementById('interviewMessages').innerHTML = `
                <div class="flex justify-start">
                    <div class="max-w-lg">
                        <div class="flex items-center space-x-2 mb-2">
                            <div class="w-8 h-8 bg-purple-100 rounded-full flex items-center justify-center">
                                <span>ðŸ¤–</span>
                            </div>
                            <span class="text-sm font-medium">AI Interviewer</span>
                        </div>
                        <div class="bg-white border border-gray-200 rounded-2xl px-4 py-3 mr-12">
                            <p class="text-gray-800">
                                Welcome! I'm your AI interviewer. I'll help capture what makes your company special. 
                                Let's start with something simple - how would you describe your company culture in a few words?
                            </p>
                        </div>
                    </div>
                </div>
            `;
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Onbora app loaded successfully!');
            showView('landing');
            
            // Set initial agent as active
            document.querySelector('[data-agent="maya"]').classList.add('bg-blue-50', 'border-blue-200');
        });
    </script>
</body>
</html>